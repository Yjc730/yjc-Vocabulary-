<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>My Vocab SRS</title>
  <link rel="stylesheet" href="./style.css" />
</head>

<body>
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand">
        <div class="logo">Q</div>
        <div>
          <div class="title">My Vocab SRS</div>
          <div class="subtitle" id="stats">載入中…</div>
        </div>
      </div>

      <nav class="tabs">
        <button class="tab is-active" data-tab="home">Home</button>
        <button class="tab" data-tab="study">Study</button>
        <button class="tab" data-tab="add">Add</button>
        <button class="tab" data-tab="library">Library</button>
        <button class="tab" data-tab="backup">Backup</button>
      </nav>
    </div>
  </header>

  <main class="container">

    <!-- Home (Cards) -->
    <section id="tab-home" class="panel">
      <div class="row between">
        <h2>Home</h2>
        <div class="hint">Folder → Set（點卡片直接開始複習 / 看單字薄）</div>
      </div>

      <div class="row wrap gap" style="margin-top:10px;">
        <div class="field">
          <label>Folder</label>
          <select id="homeFolderSelect"></select>
        </div>
        <div class="field grow">
          <label>搜尋 Set</label>
          <input id="homeSearch" placeholder="輸入單元名稱，例如 Unit 5 / Article Words / Week 3…" />
        </div>
      </div>

      <div id="cardsWrap" class="cardsWrap"></div>
    </section>

    <!-- Study -->
    <section id="tab-study" class="panel">
      <div class="row between">
        <h2>Study</h2>
        <button id="reloadBtn" class="btn btn-ghost" type="button">重新載入</button>
      </div>

      <div class="row wrap gap">
        <div class="field">
          <label>Folder</label>
          <select id="studyFolderSelect"></select>
        </div>

        <div class="field">
          <label>Set</label>
          <select id="studySetSelect"></select>
        </div>

        <div class="field">
          <label>模式</label>
          <select id="modeSelect">
            <option value="en2zh">英 → 中</option>
            <option value="zh2en">中 → 英</option>
            <option value="cloze">例句挖空</option>
          </select>
        </div>

        <div class="hint">手機左右滑：←不熟｜→熟｜空白翻面｜1/2/3 評分</div>
      </div>

      <div class="todayBox">
        <div class="row between">
          <div class="todayText" id="todayText">今日進度：0 / 0</div>
          <div class="todayText muted" id="todayDoneText">今日完成：0</div>
        </div>
        <div class="bar"><div id="todayBar" class="barFill" style="width:0%"></div></div>
      </div>

      <div id="empty" class="empty">今天沒有到期單字 🎉</div>

      <div id="reviewBox" class="review hidden">
        <div class="progress">
          <span id="progressText">1 / 1</span>
          <span class="pill">Due</span>
        </div>

        <button id="cardBtn" class="flashcard" type="button">
          <div class="front">
            <div class="big" id="front">term</div>
            <div class="muted" id="frontSub"></div>
            <div class="tap">點一下顯示答案</div>
          </div>
          <div class="back">
            <div class="big2" id="back"></div>
            <div class="meta" id="exampleOut"></div>
            <div class="meta" id="tagsOut"></div>
            <div class="tap">點一下回到題目</div>
          </div>
        </button>

        <div class="rateRow">
          <button class="btn btn-soft rate" data-score="1" type="button">不熟</button>
          <button class="btn btn-ghost rate" data-score="2" type="button">普通</button>
          <button class="btn btn-primary rate" data-score="3" type="button">熟</button>
        </div>
      </div>
    </section>

    <!-- Add -->
    <section id="tab-add" class="panel hidden">
      <div class="row between">
        <h2>Add</h2>
        <div class="hint">先建 Folder → 再建 Set（可選：考試/截止日）→ 再加單字</div>
      </div>

      <div class="panelInner">
        <div class="row wrap gap">
          <div class="field grow">
            <label>Folder</label>
            <select id="addFolderSelect"></select>
          </div>
          <div class="field grow">
            <label>新增 Folder</label>
            <div class="row gap">
              <input id="newFolderName" placeholder="例如：Academic / Daily / TOEIC / Article Words" />
              <button id="createFolderBtn" class="btn btn-ghost" type="button">建立</button>
            </div>
          </div>
        </div>

        <div class="row wrap gap">
          <div class="field grow">
            <label>Set（單元）</label>
            <select id="addSetSelect"></select>
          </div>

          <div class="field grow">
            <label>新增 Set（單元）</label>
            <div class="row gap">
              <input id="newSetName" placeholder="例如：Unit 5 / Week 3 / Article #12 / Lesson 4" />
              <button id="createSetBtn" class="btn btn-ghost" type="button">建立</button>
            </div>
          </div>
        </div>

        <div class="grid">
          <div class="field">
            <label>本單元考試名稱（可空）</label>
            <input id="examTitle" placeholder="例如：Unit 5 Quiz / Midterm Vocab" />
          </div>
          <div class="field">
            <label>考試日期（可空）</label>
            <input id="examDate" type="date" />
          </div>
        </div>
        <div class="row gap">
          <button id="saveExamBtn" class="btn btn-soft" type="button">儲存本單元考試資訊</button>
          <div class="msg" id="examMsg"></div>
        </div>

        <hr class="hr" />

        <div class="grid">
          <div class="field">
            <label>英文</label>
            <input id="term" placeholder="catabolism" />
          </div>
          <div class="field">
            <label>詞性</label>
            <input id="pos" placeholder="n." />
          </div>
          <div class="field">
            <label>中文</label>
            <input id="definition" placeholder="分解代謝" />
          </div>
          <div class="field">
            <label>例句（可空）</label>
            <input id="example" placeholder="During fasting, catabolism increases." />
          </div>
          <div class="field span2">
            <label>tags（逗號分隔）</label>
            <input id="tags" placeholder="unit5, exam, reading" />
          </div>
        </div>

        <div class="row gap">
          <button id="addBtn" class="btn btn-primary" type="button">加入</button>
          <div class="msg" id="addMsg"></div>
        </div>
      </div>
    </section>

    <!-- Library -->
    <section id="tab-library" class="panel hidden">
      <div class="row between">
        <h2>Library</h2>
        <div class="row gap">
          <button id="viewTableBtn" class="btn btn-soft" type="button">表格</button>
          <button id="viewNotebookBtn" class="btn btn-ghost" type="button">單字薄</button>
          <button id="printNotebookBtn" class="btn btn-ghost" type="button">列印</button>
        </div>
      </div>

      <div class="row wrap gap">
        <div class="field">
          <label>Folder</label>
          <select id="libFolderSelect"></select>
        </div>
        <div class="field">
          <label>Set</label>
          <select id="libSetSelect"></select>
        </div>
        <div class="field grow">
          <label>搜尋</label>
          <input id="libSearch" placeholder="輸入 term / 中文 / pos / tag…" />
        </div>
        <div class="field">
          <label>&nbsp;</label>
          <button id="libRefreshBtn" class="btn btn-ghost" type="button">刷新</button>
        </div>
      </div>

      <!-- Table View -->
      <div id="tableView" class="tableWrap">
        <table class="table">
          <thead>
            <tr>
              <th>term</th>
              <th>pos</th>
              <th>中文</th>
              <th>tags</th>
              <th>下次到期</th>
              <th>操作</th>
            </tr>
          </thead>
          <tbody id="libBody"></tbody>
        </table>
      </div>

      <!-- Notebook View -->
      <div id="notebookView" class="notebook hidden">
        <div id="notebookContent"></div>
      </div>

      <!-- Edit Modal -->
      <dialog id="editDialog" class="dialog">
        <form method="dialog" class="dialogCard">
          <div class="row between">
            <h3>編輯單字</h3>
            <button class="btn btn-ghost" value="cancel" type="submit">關閉</button>
          </div>

          <input type="hidden" id="editId" />

          <div class="grid">
            <div class="field">
              <label>term</label>
              <input id="editTerm" />
            </div>
            <div class="field">
              <label>pos</label>
              <input id="editPos" />
            </div>
            <div class="field">
              <label>中文</label>
              <input id="editDef" />
            </div>
            <div class="field">
              <label>例句</label>
              <input id="editEx" />
            </div>
            <div class="field span2">
              <label>tags（逗號分隔）</label>
              <input id="editTags" />
            </div>
          </div>

          <div class="row gap">
            <button id="saveEditBtn" class="btn btn-primary" value="ok" type="button">儲存</button>
            <div class="msg" id="editMsg"></div>
          </div>
        </form>
      </dialog>
    </section>

    <!-- Backup -->
    <section id="tab-backup" class="panel hidden">
      <div class="row between">
        <h2>Backup</h2>
        <div class="hint">匯出/匯入 JSON（換電腦也不怕）</div>
      </div>

      <div class="row wrap gap">
        <button id="exportBtn" class="btn btn-primary" type="button">匯出 JSON</button>

        <div class="field grow">
          <label>匯入 JSON</label>
          <input id="importFile" type="file" accept="application/json" />
        </div>

        <button id="importBtn" class="btn btn-soft" type="button">開始匯入</button>
        <div class="msg" id="backupMsg"></div>
      </div>

      <div class="empty">建議：每週匯出一次 JSON 存到雲端硬碟。</div>
    </section>

  </main>

  <script type="module" src="./app.js"></script>
</body>
</html>
